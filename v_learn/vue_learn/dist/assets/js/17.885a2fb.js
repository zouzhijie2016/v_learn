webpackJsonp([17],{398:function(e,t,r){"use strict";var s=r(75),a=r.n(s),o=r(76),n=r.n(o),i=r(3);t.a={getStoreGroupListData:function(){var e=this;return n()(a.a.mark(function t(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/returnReport/storeList");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()},getProductEanOrImeiData:function(e){var t=this;return n()(a.a.mark(function r(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/returnReport/relatedInfo",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},getReturnReportByCondition:function(e){var t=this;return n()(a.a.mark(function r(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/returnReport/list",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},searchSalesReportDetails:function(e){var t=this;return n()(a.a.mark(function r(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/searchSalesReportDetails",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},searchOperatorSalesReportDetails:function(e){var t=this;return n()(a.a.mark(function r(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/searchOperatorSalesReportDetails",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},queryPaymentSummary:function(e){var t=this;return n()(a.a.mark(function r(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/queryPaymentSummary",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},queryStoreGroupList:function(){var e=this;return n()(a.a.mark(function t(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/queryStroeGroupList");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()},findActiveProductBykeyWord:function(e){var t=this;return n()(a.a.mark(function r(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/product/v1/product/findActiveProductBykeyWord",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},reportPermission:function(){var e=this;return n()(a.a.mark(function t(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/reportPermission");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()}}},481:function(e,t,r){var s=r(482);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r(154)("57dd6fdc",s,!0)},482:function(e,t,r){t=e.exports=r(153)(void 0),t.push([e.i,".list_box .tab_break>div{word-break:break-word}",""])},483:function(e,t,r){var s=r(484);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r(154)("1d6a2be0",s,!0)},484:function(e,t,r){t=e.exports=r(153)(void 0),t.push([e.i,".return_report_form .return_report_form_label[data-v-d2452d46]{font-size:12px}.search_box[data-v-d2452d46]{margin-bottom:15px;border:1px solid #dbdbdb;border-radius:4px;padding:24px;background-color:#fff}.center_main[data-v-d2452d46]{padding-bottom:100px}.search_row[data-v-d2452d46]{margin-bottom:20px}.search_second[data-v-d2452d46]{margin-bottom:0}.table_row>div[data-v-d2452d46]{font-size:12px}.table_items[data-v-d2452d46]{font-size:14px;font-weight:700;line-height:30px}.input_product[data-v-d2452d46]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;background-image:none;border-radius:4px;border:1px solid #bfd3d9;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f363d;display:inline-block;font-size:inherit;height:30px;line-height:1;outline:none;padding:3px 10px;-webkit-transition:border-color .2s cubic-bezier(.645,.045,.355,1);transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:200px;font-size:12px}.col_box[data-v-d2452d46]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.col_product[data-v-d2452d46]{position:relative}.col_product .product_ul[data-v-d2452d46]{position:absolute;top:35px;left:-17px;width:350px;border:1px solid #dbdbdb;outline:none;z-index:99}.col_product .product_ul li[data-v-d2452d46]{width:100%;padding-left:10px!important;height:30px;line-height:30px;font-size:12px;color:#424242;background:#fff;border-bottom:1px solid #dbdbdb;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.col_product .product_ul li.cur[data-v-d2452d46]{color:#fff;background:#1fbcd2}.col_box label.col_datepicker_label[data-v-d2452d46]{margin-left:10px;min-width:10px}.col_box label[data-v-d2452d46]{min-width:100px;text-align:right;margin-right:10px;margin-bottom:0}.col_box_btn[data-v-d2452d46]{margin-left:10px}.col_datepicker label[data-v-d2452d46]{margin-left:0}.list_box[data-v-d2452d46]{background-color:#fff;padding:10px 24px 24px;border:1px solid #dbdbdb}.item_text_desc[data-v-d2452d46]{width:240px}.item_text[data-v-d2452d46],.item_text_desc[data-v-d2452d46]{display:inline-block;height:40px;vertical-align:middle}.new_return[data-v-d2452d46]{padding:10px 15px;color:#1fbcd2;cursor:pointer}.result_store_del[data-v-d2452d46]{display:inline-block;width:20px;height:20px;background:url("+r(485)+") no-repeat 50%;background-position:-175px -52px;cursor:pointer}.list_box .list_box_tit[data-v-d2452d46]{font-weight:700;line-height:30px;margin-bottom:10px}.list_box .result_store>span[data-v-d2452d46]{color:red}.list_table[data-v-d2452d46]{font-size:12px}.list_table .item_desc[data-v-d2452d46]{display:inline-block;margin-right:10px;color:#99a9bf;height:40px;vertical-align:middle}.page_box[data-v-d2452d46]{text-align:right}",""])},485:function(e,t,r){e.exports=r.p+"assets/img/item2.9d3ed19.png"},548:function(e,t,r){"use strict";function s(e){r(481),r(483)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(12),o=r(398),n={data:function(){var e=this;return{addressIsEnter:!1,isStoreDel:!1,isStoreShow:!0,selectProduct:null,resultStore:"",loading:!1,timeOut:null,timer:1e3,isHasProduct:!1,selectProductIndex:0,productList:[],getStoreByGroup:[],storeOptions:[],storeGroupOptions:[],sizes:[10,20,30,40,50],search:{store:"",returnNo:"",orderId:"",storeGroup:"",product:"",fromPickerOptions:{disabledDate:function(t){return e.search.serverToTime?t>e.getCompareDate(e.search.serverToTime):!e.search.serverToTime&&t>e.getCompareDate(new Date)}},startTime:"",endTime:"",serverFromTime:"",serverToTime:"",toPickerOptions:{disabledDate:function(t){return!!e.search.serverFromTime&&(t<e.getCompareDate(e.search.serverFromTime)||t>e.getCompareDate(new Date))}}},orderReturnReportList:{pageNum:1,pageSize:10,pages:1,list:[],total:0,size:0}}},computed:{address:function(){return this.sale.customerAddress=this.sale.customerAddress.toString(),this.addressIsEnter?this.sale.customerAddress:this.sale.customerAddress.split("").length>50?this.sale.customerAddress.substr(0,50)+"......":this.sale.customerAddress}},watch:{"search.serverFromTime":function(e){this.search.startTime=e?a.a.getServerTimestamp(e)||"":""},"search.serverToTime":function(e){var t=a.a.parseDate(e),r=new Date(t.setDate(t.getDate()+1));this.search.endTime=a.a.getServerTimestamp(r)-1||""}},created:function(){this.getStoreGroupData()},methods:{getStoreGroupData:function(){var e=this;o.a.getStoreGroupListData().then(function(t){t.success&&(e.storeOptions=t.data,t.data.forEach(function(t,r){e.storeGroupOptions.push({storeGroupId:t.storeGroupId,storeGroupName:t.storeGroupName})}),e.storeGroupOptions.unshift({storeGroupId:"",storeGroupName:"ALL"}))}).catch(function(e){console.dir(e)})},changeStoreGroup:function(e){var t=this;t.search.store="",t.storeOptions.forEach(function(r,s){if(r.storeGroupId==e)return t.getStoreByGroup=r.storeList,void t.getStoreByGroup.unshift({storeId:"",storeName:"ALL"})})},changePageSize:function(e){this.orderReturnReportList.pageSize=e,this.queryReturnReport()},searchProduct:function(e){var t=this.search.product,r=t.length,s=/^[0-9]*$/;if(!t)return this.isHasProduct=!1,!1;8!=r&&13!=r&&15!=r||!s.test(t)||13!=e.keyCode?this.searchProductOrModel():(clearTimeout(this.timeOut),this.searchEanOrImei())},searchEanOrImei:function(){var e=this,t=this,r=t.search.product,s={product:r,store:t.search.store};o.a.getProductEanOrImeiData(s).then(function(e){console.dir(e),e.success&&(t.isHasProduct=!0,t.productList=e.data)}).catch(function(t){e.$message({showClose:!0,message:t.data.message||"Service exceptions！",type:"error"})})},searchProductOrModel:function(){var e=this;clearTimeout(e.timeOut),e.timeOut=setTimeout(function(){e.searchEanOrImei()},e.timer)},setProductToInput:function(e,t,r){console.log(r),this.selectProductIndex=t,this.selectProduct=r,this.search.product=e.target.innerText,this.isHasProduct=!1},queryReturnReport:function(e){var t=this;e&&(t.orderReturnReportList.pageNum=e);var r=t.getStoreByGroup.filter(function(e){return e.storeId===t.search.store});t.resultStore=0!=r.length?r[0].storeName:"",t.loading=!0;var s,n=t.search.product,i=n.length,c=/^[0-9]*$/;s=8!=i&&13!=i&&15!=i||!c.test(n)?t.selectProduct?t.selectProduct.productId:"":t.search.product,o.a.getReturnReportByCondition({endTime:t.search.endTime,fromPickerOptions:t.search.fromPickerOptions,orderId:t.search.orderId,pageNum:t.orderReturnReportList.pageNum,pageSize:t.orderReturnReportList.pageSize,product:s,returnNo:t.search.returnNo,serverFromTime:t.search.serverFromTime,serverToTime:t.search.serverToTime,startTime:t.search.startTime,store:t.search.store,storeGroup:t.search.storeGroup,toPickerOptions:t.search.toPickerOptions}).then(function(e){if(t.loading=!1,t.isStoreShow=!0,e.success){if(e.data&&e.data.list){for(var r=e.data.list,s=0;s<r.length;s++){var o=a.a.getServerDateStrByLocal(r[s].createLongTime,"dd/MM/yyyy hh:mm:ss");r[s].createLongTime=o}e.data.list=r}t.orderReturnReportList=e.data}else t.$message({showClose:!0,message:e.message||"Service exceptions！",type:"error"})}).catch(function(e){t.loading=!1,t.$message({showClose:!0,message:e.message||"Service exceptions！",type:"error"})})},getCompareDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},setTotalReturn:function(e){for(var t=e.data,r=0,s=0,a=0;a<t.length;a++){r+=+t[a].total.replace(/,/gi,""),s+=Number(t[a].quantity)}return r=this.setPriceToThousands(r),["Total","","","","","","","",r,s,""]},storeEnter:function(){this.isStoreDel=!0},storeOut:function(){this.isStoreDel=!1},clearEvent:function(){this.isHasProduct&&(this.isHasProduct=!1)},delStore:function(){this.search.store="",this.search.storeGroup="",this.resultStore="",this.isStoreShow=!1,this.queryReturnReport(this.search)},setPriceToThousands:function(e){if(""==(e+"").trim())return"";if(isNaN(e))return"";if(e+="",/^.*\..*$/.test(e)){var t=e.lastIndexOf("."),r=e.substring(0,t),s=e.substring(t+1,e.length);r+="";for(var a=/(-?\d+)(\d{3})/;a.test(r);)r=r.replace(a,"$1,$2");e=r+"."+s}else{e+="";for(var o=/(-?\d+)(\d{3})/;o.test(e);)e=e.replace(o,"$1,$2")}return e}},mounted:function(){document.title="Inventory | Warehouse | OCMS-BIM"},updated:function(){},components:{}},i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{on:{click:e.clearEvent}},[r("div",{staticClass:"center_main"},[r("div",{staticClass:"search_box return_report_form"},[r("el-row",{staticClass:"search_row"},[r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"return_report_form_label"},[e._v("Order ID")]),e._v(" "),r("el-input",{attrs:{size:"small"},model:{value:e.search.orderId,callback:function(t){e.$set(e.search,"orderId","string"==typeof t?t.trim():t)},expression:"search.orderId"}})],1),e._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"return_report_form_label"},[e._v("Store Group")]),e._v(" "),r("el-select",{attrs:{size:"small",placeholder:"Please select..."},on:{change:function(t){e.changeStoreGroup(e.search.storeGroup)}},model:{value:e.search.storeGroup,callback:function(t){e.$set(e.search,"storeGroup","string"==typeof t?t.trim():t)},expression:"search.storeGroup"}},e._l(e.storeGroupOptions,function(e){return r("el-option",{key:e.storeGroupId,attrs:{label:e.storeGroupName,value:e.storeGroupId}})}))],1),e._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"return_report_form_label"},[e._v("Store")]),e._v(" "),r("el-select",{attrs:{size:"small",placeholder:"Please select..."},model:{value:e.search.store,callback:function(t){e.$set(e.search,"store","string"==typeof t?t.trim():t)},expression:"search.store"}},e._l(e.getStoreByGroup,function(e){return r("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}))],1),e._v(" "),r("el-col",{staticClass:"col_box col_product",attrs:{span:6}},[r("label",{staticClass:"return_report_form_label"},[e._v("Product")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search.product,expression:"search.product",modifiers:{trim:!0}}],staticClass:"input_product",attrs:{placeholder:"Model/Product ID/EAN/IMEI"},domProps:{value:e.search.product},on:{keyup:e.searchProduct,input:function(t){t.target.composing||e.$set(e.search,"product",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.isHasProduct,expression:"isHasProduct"}],staticClass:"product_ul",attrs:{tabindex:"22"}},e._l(e.productList,function(t,s){return r("li",{key:t.productId,class:s==e.selectProductIndex?"cur":"",attrs:{"data-productId":t.productId},on:{click:function(r){e.setProductToInput(r,s,t)}}},[e._v(e._s(t.productId)+":"+e._s(t.productDesc))])}))])],1),e._v(" "),r("el-row",{staticClass:"search_second search_row"},[r("el-col",{staticClass:"col_box col_datepicker",attrs:{span:12}},[r("label",{staticClass:"return_report_form_label"},[e._v("Create Date")]),e._v(" "),r("el-date-picker",{attrs:{type:"date","picker-options":e.search.fromPickerOptions,format:"dd/MM/yyyy",size:"small",placeholder:"DD/MM/YYYY"},model:{value:e.search.serverFromTime,callback:function(t){e.$set(e.search,"serverFromTime",t)},expression:"search.serverFromTime"}}),e._v(" "),r("label",{staticClass:"col_datepicker_label"},[e._v("---")]),e._v(" "),r("el-date-picker",{attrs:{type:"date","picker-options":e.search.toPickerOptions,format:"dd/MM/yyyy",size:"small",placeholder:"DD/MM/YYYY"},model:{value:e.search.serverToTime,callback:function(t){e.$set(e.search,"serverToTime",t)},expression:"search.serverToTime"}})],1),e._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"return_report_form_label"},[e._v("Return No.")]),e._v(" "),r("el-input",{attrs:{size:"small"},model:{value:e.search.returnNo,callback:function(t){e.$set(e.search,"returnNo","string"==typeof t?t.trim():t)},expression:"search.returnNo"}})],1),e._v(" "),r("el-col",{staticClass:"col_box col_box_btn",attrs:{span:2}},[r("el-button",{staticClass:"button",attrs:{size:"small",loading:e.loading,type:"primary",icon:"search"},on:{click:function(t){e.queryReturnReport(1)}}},[e._v("Search\n            ")])],1)],1)],1),e._v(" "),r("div",{staticClass:"list_box"},[r("div",{staticClass:"list_box_tit"},[r("span",{staticClass:"result_nums"},[e._v(e._s(e.orderReturnReportList.total))]),e._v("  Results for  \n            "),r("span",[r("span",e._g({directives:[{name:"show",rawName:"v-show",value:e.isStoreShow,expression:"isStoreShow"}],staticClass:"result_store"},{mouseenter:e.storeEnter,mouseleave:e.storeOut}),[e.resultStore?[e._v('\n                            "'),r("span",[e._v(e._s(e.resultStore))]),e._v('"'),r("span",{directives:[{name:"show",rawName:"v-show",value:e.isStoreDel,expression:"isStoreDel"}],staticClass:"result_store_del",on:{click:e.delStore}})]:e._e()],2)])]),e._v(" "),r("el-table",{staticClass:"list_table",staticStyle:{width:"100%"},attrs:{data:e.orderReturnReportList.list,border:"","show-summary":"","summary-method":e.setTotalReturn,"default-sort":{prop:"createLongTime",order:"descending"}}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"table_items"},[e._v("Return Items")]),e._v(" "),e._l(t.row.returnItemList,function(t){return r("el-row",{key:t,staticClass:"table_row"},[r("el-col",{attrs:{span:8}},[r("span",{staticClass:"item_desc"},[e._v("Product Description: ")]),r("span",{staticClass:"item_text_desc"},[e._v(e._s(t.productDesc))])]),e._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[e._v("IMEI: ")]),r("span",{staticClass:"item_text"},[e._v(e._s(t.imei))])]),e._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[e._v("Product ID: ")]),r("span",{staticClass:"item_text"},[e._v(e._s(t.productId))])]),e._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[e._v("EAN: ")]),r("span",{staticClass:"item_text"},[e._v(e._s(t.ean))])]),e._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[e._v("unit: ")]),r("span",{staticClass:"item_text"},[e._v(e._s(t.unit))])])],1)})]}}])}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"orderId",label:"Order ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"returnNo",label:"Return No",sortable:"",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"returnReason",label:"Return Reason",width:"150","class-name":"tab_break"}}),e._v(" "),r("el-table-column",{attrs:{prop:"responsibleParty",label:"Responsible Party",width:"160","class-name":"tab_break"}}),e._v(" "),r("el-table-column",{attrs:{prop:"operator",label:"Operator"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createLongTime",label:"Created Time",width:"155"}}),e._v(" "),r("el-table-column",{attrs:{prop:"total",label:"Total(GHS)","class-name":"tab_break"}}),e._v(" "),r("el-table-column",{attrs:{prop:"quantity",label:"Qty(PCS)"}}),e._v(" "),r("el-table-column",{attrs:{prop:"returnType",label:"Return Type",width:"110"}})],1)],1),e._v(" "),e.orderReturnReportList.list&&e.orderReturnReportList.list.length?r("div",{staticClass:"page_box"},[r("el-pagination",{attrs:{"current-page":e.orderReturnReportList.pageNum,"page-sizes":e.sizes,layout:"total,sizes, prev, pager, next",total:e.orderReturnReportList.total},on:{"current-change":e.queryReturnReport,"update:currentPage":function(t){e.$set(e.orderReturnReportList,"pageNum",t)},"size-change":e.changePageSize}})],1):e._e()])])},c=[],l={render:i,staticRenderFns:c},u=l,d=r(99),p=s,m=d(n,u,!1,p,"data-v-d2452d46",null);t.default=m.exports}});
webpackJsonp([39],{399:function(e,t,r){"use strict";var s=r(75),i=r.n(s),a=r(76),o=r.n(a),n=r(3);t.a={getUserPermission:function(){var e=this;return o()(i.a.mark(function t(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post("/warehouse/control/userPermission");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()},getProductList:function(e){var t=this;return o()(i.a.mark(function r(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/warehouse/control/queryProduct",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},getIMEIProduct:function(e){var t=this;return o()(i.a.mark(function r(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/warehouse/control/queryProduct",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},findIMEIWithProductIdLog:function(e){var t=this;return o()(i.a.mark(function r(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/api/warehouse/v1/inventoryItem/findIMEIWithProductIdLog",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},findProductByImei:function(e){var t=this;return o()(i.a.mark(function r(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/api/warehouse/v1/inventoryItem/findProductByImei",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},updateIMEIProductId:function(e){var t=this;return o()(i.a.mark(function r(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/api/warehouse/v1/inventoryItem/updateIMEIProductId",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()},findProductModelByKeyword:function(e){var t=this;return o()(i.a.mark(function r(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/api/product/v1/product/findProductModelByKeyword",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},r,t)}))()}}},501:function(e,t,r){var s=r(502);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r(154)("0776a83c",s,!0)},502:function(e,t,r){t=e.exports=r(153)(void 0),t.push([e.i,'.el-row[data-v-1efa78eb]{margin-top:10px}.search_box[data-v-1efa78eb]{background:#fff;padding-left:10px;padding-bottom:20px}.search_box .search_box_tit[data-v-1efa78eb]{line-height:45px;font-size:18px;color:#424242;border-bottom:1px solid #dbdbdb;height:45px;font-weight:700;margin-right:20px}.search_box .search[data-v-1efa78eb]{margin-left:10px;margin-top:10px}.search .err_kwd[data-v-1efa78eb]{display:inline-block;color:red;font-size:14px;margin-left:5px}.list_box[data-v-1efa78eb]{background:#fff;padding-left:20px;padding-right:20px;padding-bottom:10px}.list_box[data-v-1efa78eb]:after{content:"";clear:both}.list_box .imei_table[data-v-1efa78eb]{width:100%;min-height:200px}.maintain_box[data-v-1efa78eb]{background:#fff;min-height:250px;padding:30px 20px 20px}.maintain_box .maintain_box_tit[data-v-1efa78eb]{line-height:45px;width:90%;font-size:18px;color:#424242;height:45px;font-weight:700}.maintain_box .maintain[data-v-1efa78eb]{margin-left:10px;margin-top:10px}.maintain .err_info[data-v-1efa78eb]{display:inline-block;color:red;font-size:14px;margin-left:5px}.maintain .tips[data-v-1efa78eb]{vertical-align:middle;margin-left:15px;display:inline-block;width:42%;font-size:12px}.maintain .tips b[data-v-1efa78eb]{color:teal}',""])},503:function(e,t,r){var s=r(504);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r(154)("3e1b5801",s,!0)},504:function(e,t,r){t=e.exports=r(153)(void 0),t.push([e.i,".el-col[data-v-3f041a8d]{text-overflow:ellipsis;overflow:hidden}li[data-v-3f041a8d]:active{background:#1fbcd2}",""])},556:function(e,t,r){"use strict";function s(e){r(503)}function i(e){r(501)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r(399),n={name:"ProductSuggest",data:function(){return{}},props:{item:{type:Object,required:!0}},methods:{selectItem:function(e){console.log("emit!!"),this.$emit("click",this.item,e.currentTarget)}}},c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{on:{click:e.selectItem}},[r("el-col",{attrs:{title:e.item.productId,span:6}},[e._v(e._s(e.item.productId))]),e._v(" "),r("el-col",{attrs:{title:e.item.model,span:11}},[e._v(e._s(e.item.model))]),e._v(" "),e.item.description?r("el-col",{attrs:{title:e.item.description,span:7}},[e._v(e._s(e.item.description))]):e._e()],1)},u=[],d={render:c,staticRenderFns:u},l=d,p=r(99),f=s,m=p(n,l,!1,f,"data-v-3f041a8d",null),h=m.exports,g=r(12);a.default.component("ProductSuggest",h);var v={data:function(){return{search:{imei:"",errmsg:"",loading:!1},form:{productID:"",loading:!1,selectItem:null,showNoData:!1},imeiList:[],sugession:{triggerOnFocus:!1,sgprops:{value:""}}}},created:function(){this.scanQRCode=g.a.debounce(this.searchIMEI,500),this.querySuggessionDebounce=g.a.debounce(this.querySuggession,500)},methods:{getRealIMEIArr:function(e){var t=this.search.imei,r=[];if(!t)return this.search.errmsg="Please enter correct IMEI code",e.focus(),!1;if(-1!=t.indexOf("|")&&(t=t.replace(/[|]/g,"")),t.length>15&&t.length%15==0){if(!new RegExp("^[0-9]*$").test(t))return this.search.errmsg="Please enter correct IMEI code",e.focus(),!1;for(var s="",i=0,a=t.length;i<a;i++)s+=t[i],(i+1)%15==0&&(r.indexOf(s)<0&&r.push(s),s="")}else{if(!new RegExp("^([0-9]{15})$").test(t))return this.search.errmsg="Please enter correct IMEI code",this.search.errmsg="Please enter correct IMEI code",void e.focus();if(t.indexOf("012345678912456")>-1)return this.search.imei="",!1;r.push(t)}return r},searchIMEI:function(){var e=this,t=this.$refs.imei,r=this.getRealIMEIArr(t);if(!r||!r.length)return!1;this.search.errmsg="",this.search.loading=!0,o.a.findProductByImei(r.join(",")).then(function(t){if(e.search.loading=!1,1==t.success){if(e.search.imei="",t.data&&t.data.length){var r=t.data.filter(function(t){var r=e.imeiList.filter(function(e){return e.imei===t.imei});return!r||!r.length});r&&r.length&&(e.imeiList=e.imeiList.concat(r))}}else e.$message({showClose:!0,message:t.message||"Service exceptions！",type:"error"})}).catch(function(t){e.search.loading=!1,e.$message({showClose:!0,message:t.data.message||"Service exceptions！",type:"error"})})},removeIMEI:function(e){for(var t=this.imeiList.length,r=0;r<t;r++){if(this.imeiList[r].imei==e){this.imeiList.splice(r,1);break}}},updateIMEI:function(){var e=this;return this.imeiList&&this.imeiList.length?this.form.selectItem?(this.form.loading=!0,void o.a.updateIMEIProductId({fromProduct:this.imeiList,toDescription:this.form.selectItem.description,toModel:this.form.selectItem.model,toProductId:this.form.selectItem.productId}).then(function(t){e.form.loading=!1,t.success&&(e.imeiList.splice(0),e.search.imei="",e.search.errmsg="",e.search.loading=!1,e.form.productID="",e.form.loading=!1,e.form.selectItem=null,e.form.showNoData=!1,e.$message({showClose:!0,message:"Modify Product Model Success!",type:"info"}))}).catch(function(t){e.form.loading=!1,e.$message({showClose:!0,message:t.data.message||"Service exceptions！",type:"error"})})):(this.$message({showClose:!0,message:"Please choose to adjust the goods",type:"info"}),!1):(this.$message({showClose:!0,message:"Please choose to adjust the  IMEI products",type:"info"}),!1)},querySuggession:function(e,t){var r=this;if(!e)return t([]),!1;o.a.findProductModelByKeyword({keyword:e}).then(function(e){1==e.success?e.data&&e.data.list&&e.data.list.length?(r.form.showNoData=!1,t(e.data.list)):(r.form.showNoData=!0,t([])):(r.$message({type:"info",message:"Successfully operated",showClose:!0}),t([]))}).catch(function(e){r.$message({showClose:!0,message:e.data.message||"Service exceptions！",type:"error"}),t([])})},selectSuggession:function(e){this.form.selectItem=e,this.form.productID=e.productId+e.model+(e.description||"")}},components:{LeftMenu:function(){return r.e(42).then(r.bind(null,161))}}},b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"search_box"},[r("div",{staticClass:"search"},[r("span",{staticStyle:{width:"60px"}},[e._v(" IMEI：")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search.imei,expression:"search.imei",modifiers:{trim:!0}}],ref:"imei",staticClass:"common_theme",staticStyle:{width:"300px"},attrs:{type:"text"},domProps:{value:e.search.imei},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.scanQRCode(t)},input:function(t){t.target.composing||e.$set(e.search,"imei",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("el-button",{attrs:{loading:e.search.loading,type:"primary"},on:{click:e.searchIMEI}},[e._v("Add\n            ")]),e._v(" "),r("span",{staticClass:"err_kwd"},[e._v(e._s(e.search.errmsg))])],1)]),e._v(" "),r("div",{staticClass:"list_box"},[r("el-table",{staticClass:"imei_table",attrs:{border:"","max-height":"450",data:e.imeiList,"empty-text":"There is no IMEI commodity data."}},[r("el-table-column",{attrs:{label:"No.",type:"index",width:"70"}}),e._v(" "),r("el-table-column",{attrs:{prop:"imei",label:"IMEI",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{sortable:"",label:"Current Model"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.model)+"  "+e._s(t.row.description||""))])]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"productId",label:"Current Product ID"}}),e._v(" "),r("el-table-column",{attrs:{width:"160",label:"Edit"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.removeIMEI(t.row.imei)}}},[e._v("Remove\n                    ")])]}}])})],1)],1),e._v(" "),r("div",{staticClass:"maintain_box"},[r("div",{staticClass:"maintain_box_tit"},[e._v("Batch Edit Product ID / Model")]),e._v(" "),r("div",{staticClass:"maintain"},[r("el-row",[r("span",[e._v("New Product Model：")]),e._v(" "),r("el-autocomplete",{staticStyle:{width:"40%"},attrs:{"trigger-on-focus":e.sugession.triggerOnFocus,"custom-item":"ProductSuggest","fetch-suggestions":e.querySuggessionDebounce,placeholder:"Input Product ID / Model / EAN to search"},on:{select:e.selectSuggession},model:{value:e.form.productID,callback:function(t){e.$set(e.form,"productID","string"==typeof t?t.trim():t)},expression:"form.productID"}}),e._v(" "),r("div",{staticClass:"tips"},[r("b",[e._v("Tips：")]),e._v("The above IMEI products will be matched with the new product ID and new model you choose, please choose carefully.\n                ")])],1),e._v(" "),r("el-row",[e.form.showNoData?r("span",{staticClass:"err_info"},[e._v("Cannot find this item of product, please check.")]):e._e()]),e._v(" "),r("el-row",{staticStyle:{"margin-top":"30px"}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticClass:"button",attrs:{loading:e.form.loading,type:"primary"},on:{click:e.updateIMEI}},[e._v("\n                        Confirm to Change\n                    ")])],1)],1)],1)])])},I=[],x={render:b,staticRenderFns:I},_=x,w=r(99),y=i,M=w(v,_,!1,y,"data-v-1efa78eb",null);t.default=M.exports}});
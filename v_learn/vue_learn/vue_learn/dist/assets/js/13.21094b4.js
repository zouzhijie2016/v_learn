webpackJsonp([13],{403:function(t,e,r){"use strict";var s=r(75),a=r.n(s),n=r(76),o=r.n(n),i=r(3);e.a={getStoreData:function(){var t=this;return o()(a.a.mark(function e(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/findAvailableStore");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},e,t)}))()},getReturnSalesByCondition:function(t){var e=this;return o()(a.a.mark(function r(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/getReturnOrderList",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},r,e)}))()},getReturnSalesByOrderId:function(t){var e=this;return o()(a.a.mark(function r(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/getReturnOrderDetailList",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},r,e)}))()},getReturnReasonList:function(){var t=this;return o()(a.a.mark(function e(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/getReturnReasonList");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},e,t)}))()},findOrderCurrency:function(){var t=this;return o()(a.a.mark(function e(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/findOrderCurrency");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},e,t)}))()},getReturnResponsiblePartyList:function(){var t=this;return o()(a.a.mark(function e(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/getReturnResponsiblePartyList");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},e,t)}))()},selectReturnItems:function(t){var e=this;return o()(a.a.mark(function r(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/selectReturnItems",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},r,e)}))()},createReturnSaleOrder:function(t){var e=this;return o()(a.a.mark(function r(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/creatReturnSaleOrder",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},r,e)}))()},findOrderByImei:function(t){var e=this;return o()(a.a.mark(function r(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/findOrderByImei",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},r,e)}))()},findOrderByOrderId:function(t){var e=this;return o()(a.a.mark(function r(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/findOrderByOrderId",t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},r,e)}))()}}},410:function(t,e,r){t.exports=r.p+"assets/img/item2.9d3ed19.png"},439:function(t,e,r){var s=r(440);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r(154)("229c3d30",s,!0)},440:function(t,e,r){e=t.exports=r(153)(void 0),e.push([t.i,".list_table table td>div{font-size:12px}",""])},441:function(t,e,r){var s=r(442);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r(154)("2a991f72",s,!0)},442:function(t,e,r){e=t.exports=r(153)(void 0),e.push([t.i,".list_box .tab_break>div{word-break:break-word}",""])},443:function(t,e,r){var s=r(444);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r(154)("3f5312e9",s,!0)},444:function(t,e,r){e=t.exports=r(153)(void 0),e.push([t.i,".search_box[data-v-40563918]{margin-bottom:15px;margin-top:15px;border:1px solid #dbdbdb;border-radius:4px;padding:10px 24px 24px;background-color:#fff}.search_box_tit[data-v-40563918]{font-size:14px;font-weight:700;line-height:40px}.search_box .sale_list_label[data-v-40563918]{font-size:12px}.search_row[data-v-40563918]{margin-bottom:10px}.table_row>div[data-v-40563918]{font-size:12px}.table_items[data-v-40563918]{font-size:14px;font-weight:700;line-height:30px}.col_box[data-v-40563918]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.col_box label[data-v-40563918]{margin-right:10px;margin-bottom:0}.col_box_btn[data-v-40563918]{margin-left:10px}.col_datepicker label[data-v-40563918]{margin-left:0}.col_datepicker .col_datepicker_label[data-v-40563918]{margin-left:0;min-width:10px}.list_box[data-v-40563918]{background-color:#fff;padding:10px 24px 24px;border:1px solid #dbdbdb}.item_text_desc[data-v-40563918]{width:240px}.item_text[data-v-40563918],.item_text_desc[data-v-40563918]{display:inline-block;height:40px;vertical-align:middle}.new_return[data-v-40563918]{display:inline-block;padding:10px 15px;color:#1fbcd2;cursor:pointer}.result_store_del[data-v-40563918]{display:inline-block;width:20px;height:20px;background:url("+r(410)+") no-repeat 50%;background-position:-175px -52px;cursor:pointer}.list_box .list_box_tit[data-v-40563918]{font-weight:700;line-height:30px;margin-bottom:10px}.list_box .result_store>span[data-v-40563918]{color:red}.list_table[data-v-40563918]{font-size:12px}.list_table .item_desc[data-v-40563918]{display:inline-block;margin-right:10px;color:#99a9bf;height:40px;vertical-align:middle}.page_box[data-v-40563918]{text-align:right}",""])},540:function(t,e,r){"use strict";function s(t){r(439),r(441),r(443)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(12),n=r(403),o={data:function(){return{addressIsEnter:!1,isStoreDel:!1,isStoreShow:!0,CurrentTotal:"Total",sale:{store:"",orderId:"",customerName:"",customerMobile:"",customerAddress:"",pageNum:1},orderSalesReturnlist:{}}},computed:{address:function(){return this.sale.customerAddress=this.sale.customerAddress?this.sale.customerAddress.toString():"",this.addressIsEnter?this.sale.customerAddress:this.sale.customerAddress.split("").length>50?this.sale.customerAddress.substr(0,50)+"......":this.sale.customerAddress}},created:function(){var t=this.$route.params.orderId;t||(t=this.$route.query.orderId),t&&localStorage.setItem("orderId",t),this.sale.orderId=t||localStorage.getItem("orderId"),this.getSalesReturnByOrderId(this.sale.orderId),this.getInitData()},methods:{getInitData:function(){var t=this;n.a.findOrderCurrency().then(function(e){1==e.success&&e.data&&(t.CurrentTotal=t.CurrentTotal+"("+e.data+")")})},getSalesReturnByOrderId:function(t){var e=this,r={orderId:t,pageNum:e.sale.pageNum};n.a.getReturnSalesByOrderId(r).then(function(t){t.success?(t.data&&t.data.list&&(e.setSalesData(t.data.list),t.data.list=e.formatDataList(t.data.list)),e.orderSalesReturnlist=t.data):e.showErroMessage(t.message,"Service exceptions！")}).catch(function(t){e.showErroMessage(t.message,"Service exceptions！")})},setTotalSalesReturnList:function(t){for(var e=t.data,r=0,s=0,a=0;a<e.length;a++){r+=+e[a].total.replace(/,/gi,""),s+=Number(e[a].quantity)}return r=this.setPriceToThousands(r),["Total","","","","","","",r,s]},addressEnterOrOut:function(){this.addressIsEnter=!this.addressIsEnter},formatDataList:function(t){for(var e=0;e<t.length;e++){var r=a.a.getServerDateStrByLocal(t[e].createLongTime,"dd/MM/yyyy hh:mm:ss");t[e].createLongTime=r}return t},setSalesData:function(t){this.sale.orderId=t[0].orderId,this.sale.store=t[0].store,this.sale.customerName=t[0].customerName,this.sale.customerMobile=t[0].customerMobile,this.sale.customerAddress=t[0].customerAddress},setPriceToThousands:function(t){if(""==(t+"").trim())return"";if(isNaN(t))return"";if(t+="",/^.*\..*$/.test(t)){var e=t.lastIndexOf("."),r=t.substring(0,e),s=t.substring(e+1,t.length);r+="";for(var a=/(-?\d+)(\d{3})/;a.test(r);)r=r.replace(a,"$1,$2");t=r+"."+s}else{t+="";for(var n=/(-?\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1,$2")}return t},showErroMessage:function(t,e){this.$message({showClose:!0,message:t||e,type:"error"})}},mounted:function(){document.title="Sales Return | Order Management | OCMS-BIM"},components:{}},i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"center_main"},[r("div",{staticClass:"search_box"},[r("div",{staticClass:"search_box_tit"},[t._v("Sales Return List")]),t._v(" "),r("el-row",{staticClass:"search_row"},[r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"sale_list_label"},[t._v("Order ID : ")]),t._v(" "),r("span",{staticClass:"sale_list_span"},[t._v(t._s(t.sale.orderId))])]),t._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:12}},[r("label",{staticClass:"sale_list_label"},[t._v("Store : ")]),t._v(" "),r("span",{staticClass:"sale_list_span"},[t._v(t._s(t.sale.store))])])],1),t._v(" "),r("el-row",{staticClass:"search_row"},[r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"sale_list_label"},[t._v("Customer Name : ")]),t._v(" "),r("span",{staticClass:"sale_list_span"},[t._v(t._s(t.sale.customerName))])]),t._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"sale_list_label"},[t._v("Customer Mobile : ")]),t._v(" "),r("span",{staticClass:"sale_list_span"},[t._v(t._s(t.sale.customerMobile))])]),t._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:12}},[r("label",{staticClass:"sale_list_label"},[t._v("Customer Address : ")]),t._v(" "),r("span",t._g({staticClass:"sale_list_span"},{mouseenter:t.addressEnterOrOut,mouseleave:t.addressEnterOrOut}),[t._v(t._s(t.address))])])],1)],1),t._v(" "),r("div",{staticClass:"list_box"},[r("router-link",{attrs:{to:"/createSalesReturn"}},[r("div",{staticClass:"new_return"},[r("i",{staticClass:"el-icon-plus"}),t._v(" New a Return")])]),t._v(" "),r("el-table",{staticClass:"list_table",staticStyle:{width:"100%"},attrs:{data:t.orderSalesReturnlist.list,border:"","show-summary":"","summary-method":t.setTotalSalesReturnList,"default-sort":{prop:"createDate"}}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"table_items"},[t._v("Return Items")]),t._v(" "),t._l(e.row.returnItemMapList,function(e){return r("el-row",{key:e,staticClass:"table_row"},[r("el-col",{attrs:{span:8}},[r("span",{staticClass:"item_desc"},[t._v("Product Description: ")]),r("span",{staticClass:"item_text_desc"},[t._v(t._s(e.productDesc))])]),t._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[t._v("IMEI: ")]),r("span",{staticClass:"item_text"},[t._v(t._s(e.imei))])]),t._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[t._v("Product ID: ")]),r("span",{staticClass:"item_text"},[t._v(t._s(e.productId))])]),t._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[t._v("EAN: ")]),r("span",{staticClass:"item_text"},[t._v(t._s(e.EAN))])]),t._v(" "),r("el-col",{attrs:{span:4}},[r("span",{staticClass:"item_desc"},[t._v("unit: ")]),r("span",{staticClass:"item_text"},[t._v(t._s(e.unit))])])],1)})]}}])}),t._v(" "),r("el-table-column",{attrs:{type:"index",width:"55"}}),t._v(" "),r("el-table-column",{attrs:{prop:"returnNo",label:"Return No"}}),t._v(" "),r("el-table-column",{attrs:{prop:"returnReason",label:"Return Reason",width:"150","class-name":"tab_break"}}),t._v(" "),r("el-table-column",{attrs:{prop:"responsibleParty",label:"Responsible Party",width:"160"}}),t._v(" "),r("el-table-column",{attrs:{prop:"operator",label:"Operator"}}),t._v(" "),r("el-table-column",{attrs:{prop:"createLongTime",label:"Created Time",width:"155"}}),t._v(" "),r("el-table-column",{attrs:{prop:"total",label:t.CurrentTotal}}),t._v(" "),r("el-table-column",{attrs:{prop:"quantity",label:"Qty(PCS)"}}),t._v(" "),r("el-table-column",{attrs:{prop:"returnType",label:"Return Type"}})],1)],1)])])},l=[],c={render:i,staticRenderFns:l},d=c,u=r(99),p=s,_=u(o,d,!1,p,"data-v-40563918",null);e.default=_.exports}});
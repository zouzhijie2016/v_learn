webpackJsonp([14],{403:function(e,t,r){"use strict";var a=r(75),s=r.n(a),n=r(76),o=r.n(n),i=r(3);t.a={getStoreData:function(){var e=this;return o()(s.a.mark(function t(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/findAvailableStore");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()},getReturnSalesByCondition:function(e){var t=this;return o()(s.a.mark(function r(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/getReturnOrderList",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},r,t)}))()},getReturnSalesByOrderId:function(e){var t=this;return o()(s.a.mark(function r(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/getReturnOrderDetailList",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},r,t)}))()},getReturnReasonList:function(){var e=this;return o()(s.a.mark(function t(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/getReturnReasonList");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()},findOrderCurrency:function(){var e=this;return o()(s.a.mark(function t(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/findOrderCurrency");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()},getReturnResponsiblePartyList:function(){var e=this;return o()(s.a.mark(function t(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/order/v1/order/getReturnResponsiblePartyList");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},t,e)}))()},selectReturnItems:function(e){var t=this;return o()(s.a.mark(function r(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/selectReturnItems",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},r,t)}))()},createReturnSaleOrder:function(e){var t=this;return o()(s.a.mark(function r(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/creatReturnSaleOrder",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},r,t)}))()},findOrderByImei:function(e){var t=this;return o()(s.a.mark(function r(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/findOrderByImei",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},r,t)}))()},findOrderByOrderId:function(e){var t=this;return o()(s.a.mark(function r(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.post("/api/order/v1/order/findOrderByOrderId",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},r,t)}))()}}},410:function(e,t,r){e.exports=r.p+"assets/img/item2.9d3ed19.png"},433:function(e,t,r){var a=r(434);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(154)("bcbb5342",a,!0)},434:function(e,t,r){t=e.exports=r(153)(void 0),t.push([e.i,".list_table table td>div{font-size:12px}",""])},435:function(e,t,r){var a=r(436);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(154)("f8ffc004",a,!0)},436:function(e,t,r){t=e.exports=r(153)(void 0),t.push([e.i,".list_box .tab_break>div{word-break:break-word}",""])},437:function(e,t,r){var a=r(438);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(154)("b3966c3c",a,!0)},438:function(e,t,r){t=e.exports=r(153)(void 0),t.push([e.i,".center_main[data-v-a4693888]{padding-bottom:100px}.search_box[data-v-a4693888]{margin-bottom:15px;margin-top:15px;border:1px solid #dbdbdb;border-radius:4px;padding:24px;background-color:#fff}.search_row[data-v-a4693888]{margin-bottom:20px}.search_box .sale_list_form_label[data-v-a4693888]{font-size:12px}.search_second[data-v-a4693888]{margin-bottom:0}.search_box .imei[data-v-a4693888]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;background-image:none;border-radius:4px;border:1px solid #bfd3d9;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f363d;display:inline-block;font-size:inherit;height:30px;line-height:1;outline:none;padding:3px 10px;-webkit-transition:border-color .2s cubic-bezier(.645,.045,.355,1);transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:100%}.search_box .err_kwd[data-v-a4693888]{display:inline-block;color:red;font-size:14px;margin-left:5px}.col_box[data-v-a4693888]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.col_box label.col_datepicker_label[data-v-a4693888]{margin-left:10px;min-width:10px}.col_box label[data-v-a4693888]{min-width:100px;text-align:right;margin-right:10px;margin-bottom:0}.col_box_btn[data-v-a4693888]{margin-left:10px}.col_datepicker label[data-v-a4693888]{margin-left:0}.list_box[data-v-a4693888]{background-color:#fff;padding:10px 24px 24px;border:1px solid #dbdbdb;margin-bottom:10px}.result_store_del[data-v-a4693888]{display:inline-block;width:20px;height:20px;background:url("+r(410)+") no-repeat 50%;background-position:-175px -52px;cursor:pointer}.list_box .list_box_tit[data-v-a4693888]{font-weight:700;line-height:30px;margin-bottom:10px}.list_box .result_store>span[data-v-a4693888]{color:red}.list_table[data-v-a4693888]{font-size:12px}.tab_break[data-v-a4693888]{word-break:break-word}.new_return[data-v-a4693888]{padding:10px 15px;color:#1fbcd2;cursor:pointer}.show_lists[data-v-a4693888]{color:#1fbcd2;cursor:pointer}.page_box[data-v-a4693888]{text-align:right}",""])},539:function(e,t,r){"use strict";function a(e){r(433),r(435),r(437)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(12),n=r(403),o={data:function(){var e=this;return{isStoreDel:!1,isStoreShow:!1,resultStore:"",storeOptions:[],errmsg:"",loading:!1,currentAmount:"Amount",sizes:[10,20,30,40,50],search:{store:"",returnNo:"",orderId:"",serverFromTime:"",serverToTime:"",fromPickerOptions:{disabledDate:function(t){return e.search.serverToTime?t>e.getCompareDate(e.search.serverToTime):!e.search.serverToTime&&t>e.getCompareDate(new Date)}},startTime:"",endTime:"",imei:"",toPickerOptions:{disabledDate:function(t){return!!e.search.serverFromTime&&(t<s.a.getPartialDate(e.search.serverFromTime,"yyyy/MM/dd")||t>s.a.getPartialDate(new Date,"yyyy/MM/dd"))}}},filterItemsListData:{pageNum:1,pageSize:10,pages:1,list:[],total:0,size:0}}},watch:{"search.serverFromTime":function(e){this.search.startTime=e?s.a.getServerTimestamp(e)||"":""},"search.serverToTime":function(e){var t=s.a.parseDate(e),r=new Date(t.setDate(t.getDate()+1));this.search.endTime=s.a.getServerTimestamp(r)-1||""}},created:function(){this.scanQRCode=s.a.debounce(this.searchIMEI,500),this.getInitData()},methods:{getInitData:function(){var e=this;n.a.getStoreData().then(function(t){t.success&&(e.storeOptions=t.data,e.storeOptions.unshift({storeId:"",storeName:"ALL"}),e.search.store=t.data[1].storeId)}),n.a.findOrderCurrency().then(function(t){1==t.success&&t.data&&(e.currentAmount=e.currentAmount+"("+t.data+")")})},changePageSize:function(e){this.filterItemsListData.pageSize=e,this.querySalesReturn()},getCompareDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},querySalesReturn:function(e){var t=this;e&&(t.filterItemsListData.pageNum=e);var r=t.storeOptions.filter(function(e){return!!e.storeId&&e.storeId===t.search.store});t.resultStore=0!=r.length?r[0].storeName:"",t.loading=!0,t.apiSearchByCondition()},searchIMEI:function(){var e=this,t=e.$refs.imei,r=e.search.imei;return!!r&&(-1!=r.indexOf("|")&&(r=r.replace(/\|/g,"")),new RegExp("^([0-9]{15})$").test(r)?void 0:(e.showErroMessage("Please enter correct IMEI code",""),void t.focus()))},apiSearchByCondition:function(){var e=this;n.a.getReturnSalesByCondition({store:e.search.store,returnNo:e.search.returnNo,orderId:e.search.orderId,startTime:e.search.startTime,endTime:e.search.endTime,imei:e.search.imei,pageNum:e.filterItemsListData.pageNum,pageSize:e.filterItemsListData.pageSize}).then(function(t){if(e.loading=!1,e.isStoreShow=!0,t.success){if(t.data&&t.data.list){var r=t.data.list;t.data.list=e.formatDataList(r)}e.filterItemsListData=t.data}else e.showErroMessage(t.message,"Service exceptions！")}).catch(function(t){e.loading=!1,e.showErroMessage(t.message,"Service exceptions！")})},formatDataList:function(e){for(var t=0;t<e.length;t++){for(var r=s.a.getServerDateStrByLocal(e[t].createLongTime,"dd/MM/yyyy hh:mm:ss"),a=r.split(" "),n=""!=e[t].returnItems?e[t].returnItems.split(","):[],o=0;o<n.length;o++)""==n[o]&&(n.splice(o,1),o-=1);e[t].createLongTime=a,n.length>3?(n=n.slice(0,3),n.push("......"),e[t].returnItems=n):e[t].returnItems=n}return e},showReturnSalesById:function(e){this.$router.push({name:"salesReturnList",params:{orderId:e}})},storeEnter:function(){this.isStoreDel=!0},storeOut:function(){this.isStoreDel=!1},delStore:function(){this.search.store="",this.resultStore="",this.isStoreShow=!1,this.apiSearchByCondition(this.search)},showErroMessage:function(e,t){this.$message({showClose:!0,message:e||t,type:"error"})}},mounted:function(){document.title="Sales Return | Order Management | OCMS-BIM"},updated:function(){},components:{}},i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"center_main"},[r("div",{staticClass:"search_box"},[r("el-row",{staticClass:"search_first search_row"},[r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"sale_list_form_label"},[e._v("Store")]),e._v(" "),r("el-select",{attrs:{filterable:"",placeholder:"Please select..."},model:{value:e.search.store,callback:function(t){e.$set(e.search,"store","string"==typeof t?t.trim():t)},expression:"search.store"}},e._l(e.storeOptions,function(e){return r("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}))],1),e._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"sale_list_form_label"},[e._v("Return No.")]),e._v(" "),r("el-input",{model:{value:e.search.returnNo,callback:function(t){e.$set(e.search,"returnNo","string"==typeof t?t.trim():t)},expression:"search.returnNo"}})],1),e._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"sale_list_form_label"},[e._v("Order ID")]),e._v(" "),r("el-input",{model:{value:e.search.orderId,callback:function(t){e.$set(e.search,"orderId","string"==typeof t?t.trim():t)},expression:"search.orderId"}})],1),e._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}})],1),e._v(" "),r("el-row",{staticClass:"search_second search_row"},[r("el-col",{staticClass:"col_box col_datepicker",attrs:{span:12}},[r("label",{staticClass:"sale_list_form_label"},[e._v("Create Date")]),e._v(" "),r("el-date-picker",{attrs:{type:"date","picker-options":e.search.fromPickerOptions,format:"dd/MM/yyyy",placeholder:"DD/MM/YYYY"},model:{value:e.search.serverFromTime,callback:function(t){e.$set(e.search,"serverFromTime",t)},expression:"search.serverFromTime"}}),e._v(" "),r("label",{staticClass:"col_datepicker_label"},[e._v("---")]),e._v(" "),r("el-date-picker",{attrs:{type:"date","picker-options":e.search.toPickerOptions,format:"dd/MM/yyyy",placeholder:"DD/MM/YYYY"},model:{value:e.search.serverToTime,callback:function(t){e.$set(e.search,"serverToTime",t)},expression:"search.serverToTime"}})],1),e._v(" "),r("el-col",{staticClass:"col_box",attrs:{span:6}},[r("label",{staticClass:"sale_list_form_label"},[e._v("IMEI")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search.imei,expression:"search.imei",modifiers:{trim:!0}}],ref:"imei",staticClass:"imei",domProps:{value:e.search.imei},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.scanQRCode(t)},input:function(t){t.target.composing||e.$set(e.search,"imei",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),r("el-col",{staticClass:"col_box col_box_btn",attrs:{span:2}},[r("el-button",{staticClass:"button",attrs:{loading:e.loading,type:"primary",icon:"search"},on:{click:function(t){e.querySalesReturn(1)}}},[e._v("\n                        Search\n                    ")])],1),e._v(" "),r("el-col",{staticClass:"col_box col_box_btn",attrs:{span:3}},[r("router-link",{attrs:{to:"/createSalesReturn"}},[r("div",{staticClass:"new_return"},[r("i",{staticClass:"el-icon-plus"}),e._v(" New a Return")])])],1)],1)],1),e._v(" "),r("div",{staticClass:"list_box"},[r("div",{staticClass:"list_box_tit"},[r("span",{staticClass:"result_nums"},[e._v(e._s(e.filterItemsListData.total))]),e._v("  Results for  \n                "),r("span",[r("span",e._g({directives:[{name:"show",rawName:"v-show",value:e.isStoreShow,expression:"isStoreShow"}],staticClass:"result_store"},{mouseenter:e.storeEnter,mouseleave:e.storeOut}),[e.resultStore?[e._v('\n                            "'),r("span",[e._v(e._s(e.resultStore))]),e._v('"'),r("span",{directives:[{name:"show",rawName:"v-show",value:e.isStoreDel,expression:"isStoreDel"}],staticClass:"result_store_del",on:{click:e.delStore}})]:e._e()],2)])]),e._v(" "),r("el-table",{staticClass:"list_table",staticStyle:{width:"100%"},attrs:{data:e.filterItemsListData.list,border:"","default-sort":{prop:"createDate"}}},[r("el-table-column",{attrs:{type:"index",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createLongTime",label:"Create Date",sortable:"",width:"160",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.createLongTime,function(t){return r("div",[r("span",[e._v(e._s(t))]),r("br")])})}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"returnNo",label:"Return no",sortable:"",width:"120",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{prop:"orderId",label:"Order ID",sortable:"",width:"120",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("a",{staticClass:"show_lists",attrs:{type:"text",href:"index.html#/salesReturnList?orderId="+t.row.orderId,target:"_blank"}},[e._v(e._s(t.row.orderId)+"\n                        ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Return Items",width:"220",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.returnItems,function(t){return r("div",{staticClass:"tab_break"},[e._v("\n                            "+e._s(t)+"\n                        ")])})}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"customer",label:"Customer",sortable:"",width:"143",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:e.currentAmount,sortable:"",width:"180",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{prop:"operator",label:"Operator",width:"120",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{prop:"store",label:"Store",sortable:"",width:"110",align:"left","class-name":"tab_break"}})],1)],1),e._v(" "),e.filterItemsListData.list&&e.filterItemsListData.list.length?r("div",{staticClass:"page_box"},[r("el-pagination",{attrs:{"page-size":e.filterItemsListData.pageSize,"current-page":e.filterItemsListData.pageNum,layout:"total,sizes, prev, pager, next,jumper",total:e.filterItemsListData.total},on:{"current-change":e.querySalesReturn,"size-change":e.changePageSize,"update:currentPage":function(t){e.$set(e.filterItemsListData,"pageNum",t)}}})],1):e._e()])])},l=[],c={render:i,staticRenderFns:l},u=c,d=r(99),p=a,m=d(o,u,!1,p,"data-v-a4693888",null);t.default=m.exports}});
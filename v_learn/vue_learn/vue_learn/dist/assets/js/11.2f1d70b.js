webpackJsonp([11],{398:function(t,e,r){"use strict";var a=r(75),o=r.n(a),s=r(76),i=r.n(s),n=r(3);e.a={getStoreGroupListData:function(){var t=this;return i()(o.a.mark(function e(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/api/order/v1/returnReport/storeList");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},e,t)}))()},getProductEanOrImeiData:function(t){var e=this;return i()(o.a.mark(function r(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post("/api/order/v1/returnReport/relatedInfo",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},r,e)}))()},getReturnReportByCondition:function(t){var e=this;return i()(o.a.mark(function r(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post("/api/order/v1/returnReport/list",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},r,e)}))()},searchSalesReportDetails:function(t){var e=this;return i()(o.a.mark(function r(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post("/api/order/v1/order/searchSalesReportDetails",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},r,e)}))()},searchOperatorSalesReportDetails:function(t){var e=this;return i()(o.a.mark(function r(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post("/api/order/v1/order/searchOperatorSalesReportDetails",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},r,e)}))()},queryPaymentSummary:function(t){var e=this;return i()(o.a.mark(function r(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post("/api/order/v1/order/queryPaymentSummary",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},r,e)}))()},queryStoreGroupList:function(){var t=this;return i()(o.a.mark(function e(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/api/order/v1/order/queryStroeGroupList");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},e,t)}))()},findActiveProductBykeyWord:function(t){var e=this;return i()(o.a.mark(function r(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post("/api/product/v1/product/findActiveProductBykeyWord",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},r,e)}))()},reportPermission:function(){var t=this;return i()(o.a.mark(function e(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.post("/api/order/v1/order/reportPermission");case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},e,t)}))()}}},401:function(t,e,r){t.exports={default:r(402),__esModule:!0}},402:function(t,e,r){var a=r(69),o=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},404:function(t,e,r){"use strict";function a(t){r(405)}var o={name:"ProductSuggest",data:function(){return{}},props:{item:{type:Object,required:!0}},methods:{selectItem:function(t){this.$emit("click",this.item,t.currentTarget)}}},s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{on:{click:t.selectItem}},[t.item.description?r("el-col",{attrs:{title:t.item.productId}},[t._v(t._s(t.item.productId)+":"+t._s(t.item.description))]):r("el-col",{attrs:{title:t.item.productId}},[t._v(t._s(t.item.productId))])],1)},i=[],n={render:s,staticRenderFns:i},c=n,l=r(99),u=a,p=l(o,c,!1,u,"data-v-5d535f7f",null);e.a=p.exports},405:function(t,e,r){var a=r(406);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r(154)("4d48193a",a,!0)},406:function(t,e,r){e=t.exports=r(153)(void 0),e.push([t.i,"li[data-v-5d535f7f]{width:100%}.el-col[data-v-5d535f7f]{float:left;text-overflow:ellipsis;overflow:hidden}li[data-v-5d535f7f]:active{background:#1fbcd2}",""])},492:function(t,e,r){var a=r(493);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r(154)("699aaf0f",a,!0)},493:function(t,e,r){e=t.exports=r(153)(void 0),e.push([t.i,".stockOutReport_box{background-color:#fff}.el-form-item{margin-bottom:10px}.searchDateList .el-form-item__content{width:100%}.form_label{font-size:12px;margin-right:10px}.stockOutReport_title{height:40px;margin:0 10px;line-height:40px;font-size:14px;font-weight:700;border-bottom:1px solid #dbdbdb}.stockOutReport_search{border:1px solid #dbdbdb;padding:10px;margin:10px 10px 0}.salesReport_search .el-form-item__label{font-size:12px}.stockOutReport_content{padding:10px}.stockOutReport_toolBar{height:30px;width:100%;margin:5px 0}.stockOutReport_toolBar .stockOutReport_toolBar_title{height:30px;line-height:30px;font-size:14px;font-weight:700;float:left}.stockOutReport_toolBar .stockOutReport_toolBar_exportList{margin-left:10px;float:right}.stockOutReport_toolBar .stockOutReport_toolBar_totalList{float:right;height:30px;line-height:30px;font-size:12px}.page_box{margin:15px 0;float:right;margin-right:-5px}",""])},552:function(t,e,r){"use strict";function a(t){r(492)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(6),s=r.n(o),i=r(7),n=r.n(i),c=r(401),l=r.n(c),u=r(160),p=r.n(u),d=r(0),m=r(12),g=r(398),h=r(84),f=r(404);d.default.component("ProductSuggest",f.a);var v={data:function(){var t=this;return{toData:[],fromData:[],loadingTableData:!1,searchForm:{productId:"",model:"",from:"",to:"",beginToTime:"",endToTime:"",beginDate:"",endDate:"",pageSize:"10",searchLoading:!1,exportStockOutReportLoading:!1,fromPickerOptions:{disabledDate:function(e){if(t.searchForm.endToTime){if("number"==typeof t.searchForm.endToTime){var r=new Date(t.searchForm.endToTime);return e>t.getCompareDate(r)}return e>t.getCompareDate(t.searchForm.endToTime)}return!t.searchForm.endToTime&&e>t.getCompareDate(new Date)}},toPickerOptions:{disabledDate:function(e){if(t.searchForm.beginToTime){if("number"==typeof t.searchForm.endToTime){var r=new Date(t.searchForm.endToTime+864e5);return e<m.a.getPartialDate(t.searchForm.beginToTime,"yyyy/MM/dd")||e>m.a.getPartialDate(r,"yyyy/MM/dd")}var a=new Date(new Date(t.timeNow).getTime()+864e5);return e<m.a.getPartialDate(t.searchForm.beginToTime,"yyyy/MM/dd")||e>m.a.getPartialDate(a,"yyyy/MM/dd")}return e<m.a.getPartialDate(t.searchForm.beginToTime,"yyyy/MM/dd")||e>m.a.getPartialDate(new Date((new Date).getTime()+864e5),"yyyy/MM/dd")}}},suggestion:{triggerOnFocus:!1,sgprops:{value:""}},stockOutReportListData:{list:[],pageMap:{total:"0",pageSize:"10",pageNum:"1",startRow:"0",endRow:"0"}}}},created:function(){var t=this;g.a.queryStoreGroupList().then(function(e){1==e.success?e.data&&e.data.length:t.$message({type:"error",message:"Store group query failed",showClose:!0})}).catch(function(e){t.$message({showClose:!0,message:e.message||"Service exceptions！",type:"error"})}),this.querySuggestionDebounce=m.a.debounce(this.querySuggestion,500)},watch:{"stockOutReportListData.pageMap.endRow":function(){this.stockOutReportListData.pageMap.endRow>this.stockOutReportListData.pageMap.total&&(this.stockOutReportListData.pageMap.endRow=this.stockOutReportListData.pageMap.total)}},mounted:function(){this.searchForm.beginToTime=this.timeNow-864e5,this.searchForm.endToTime=this.timeNow,this.searchStockOutReport("1")},methods:{searchStockOutReport:function(t){this.searchForm.searchLoading=!0,this.searchStockOutReportList(t)},selectProductIdSuggession:function(t){this.searchForm.productId=t.productId},selectModelSuggession:function(t){this.searchForm.model=t.productId},querySuggestion:function(t,e){var r=this;if(!t)return e([]),!1;g.a.findActiveProductBykeyWord({keyWord:t.trim()}).then(function(t){1==t.success?e(t.data&&t.data.productInfoBOList&&t.data.productInfoBOList.length?t.data.productInfoBOList:[]):(r.$message({type:"info",message:"Successfully operated",showClose:!0}),e([]))}).catch(function(t){r.$message({showClose:!0,message:t.data.message||"Service exceptions！",type:"error"}),e([])})},beginDateChangeEvt:function(t){return t?m.a.getServerTimestamp(t):""},endDateChangeEvt:function(t){if(t){var e=m.a.parseDate(t),r=new Date(e.setDate(e.getDate()+1));return m.a.getServerTimestamp(r)-1||""}return""},getParams:function(){return this.searchForm.beginDate=this.searchForm.beginToTime?this.beginDateChangeEvt(this.searchForm.beginToTime):this.beginDateChangeEvt(this.timeNow-864e5),this.searchForm.endDate=this.searchForm.endToTime?this.beginDateChangeEvt(this.searchForm.endToTime):this.endDateChangeEvt(this.timeNow),{productId:this.searchForm.productId,model:this.searchForm.model,from:this.searchForm.from,beginDate:this.searchForm.beginDate,endDate:this.searchForm.endDate,to:this.searchForm.to,pageSize:this.searchForm.pageSize}},getParamsStr:function(t){var e="";if(t)for(var r in t)if(r&&null!=t[r]){var a="";"string"==typeof t[r]||"number"==typeof t[r]?a=t[r]:"object"==p()(t[r])&&(a=l()(t[r])),e+="&"+r+"="+a}return e&&(e="?"+e.substring(1)),e},exportStockOutReportList:function(){location.href="/api/order/v1/order/exportPaymentSummary"+this.getParamsStr(this.getParams())},searchStockOutReportList:function(t){var e=this,r=this;this.loadingTableData=!0;var a=n()({},this.getParams(),{pageNum:t||"1"});g.a.searchSalesReportDetails(a).then(function(t){r.searchForm.searchLoading=!1,r.loadingTableData=!1,1==t.success?(t.data&&t.data.salesOrderDetailList&&t.data.salesOrderDetailList.length?(e.stockOutReportListData.list.splice(0),e.stockOutReportListData.list=e.stockOutReportListData.list.concat(t.data.salesOrderDetailList)):e.stockOutReportListData.list.splice(0),t.data&&t.data.pageMap&&(e.stockOutReportListData.pageMap=t.data.pageMap)):e.$message({type:"error",message:"Sales details query failed",showClose:!0})}).catch(function(t){e.searchForm.searchLoading=!1,e.loadingTableData=!1,e.$message({showClose:!0,message:t.message||"Service exceptions！",type:"error"})})},getCompareDate:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}},filters:{formatNumber:function(t){return t?(t=(t-0).toFixed(2),m.a.formatToThousands(t)):t}},computed:s()({},Object(h.mapState)(["zoneOffset","timeNow"]))},b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"stockOutReport_box"},[r("div",{staticClass:"stockOutReport_title"},[t._v("Stockout Report")]),t._v(" "),r("div",{staticClass:"stockOutReport_search"},[r("el-form",{staticClass:"stockOutReport_form",attrs:{model:t.searchForm,inline:!0}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Model"}},[r("el-autocomplete",{attrs:{"trigger-on-focus":t.suggestion.triggerOnFocus,"custom-item":"ProductSuggest","fetch-suggestions":t.querySuggestionDebounce},on:{select:t.selectModelSuggession},model:{value:t.searchForm.model,callback:function(e){t.$set(t.searchForm,"model","string"==typeof e?e.trim():e)},expression:"searchForm.model"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Product ID"}},[r("el-autocomplete",{attrs:{"trigger-on-focus":t.suggestion.triggerOnFocus,"custom-item":"ProductSuggest","fetch-suggestions":t.querySuggestionDebounce},on:{select:t.selectProductIdSuggession},model:{value:t.searchForm.productId,callback:function(e){t.$set(t.searchForm,"productId","string"==typeof e?e.trim():e)},expression:"searchForm.productId"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"From"}},[r("el-select",{attrs:{size:"small",clearable:"",placeholder:"Please Select"},model:{value:t.searchForm.from,callback:function(e){t.$set(t.searchForm,"from",e)},expression:"searchForm.from"}},t._l(t.fromData,function(t){return r("el-option",{key:t.fromId,attrs:{label:t.fromName,value:t.fromId}})}))],1)],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"To"}},[r("el-select",{attrs:{size:"small",clearable:"",placeholder:"Please Select"},model:{value:t.searchForm.to,callback:function(e){t.$set(t.searchForm,"to",e)},expression:"searchForm.to"}},t._l(t.toData,function(t){return r("el-option",{key:t.toId,attrs:{label:t.toName,value:t.toId}})}))],1)],1)],1),t._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticClass:"searchDateList",staticStyle:{width:"100%"}},[r("label",{staticClass:"form_label"},[t._v("Search Date")]),t._v(" "),r("el-date-picker",{staticStyle:{width:"33%"},attrs:{type:"date",editable:!1,clearable:!1,"picker-options":t.searchForm.fromPickerOptions,format:"dd/MM/yyyy",size:"small",placeholder:"DD/MM/YYYY"},model:{value:t.searchForm.beginToTime,callback:function(e){t.$set(t.searchForm,"beginToTime","string"==typeof e?e.trim():e)},expression:"searchForm.beginToTime"}}),t._v(" "),r("label",{staticClass:"col_datepicker_label",staticStyle:{width:"5%","text-align":"center"}},[t._v("-")]),t._v(" "),r("el-date-picker",{staticStyle:{width:"33%"},attrs:{type:"date",editable:!1,clearable:!1,"picker-options":t.searchForm.toPickerOptions,format:"dd/MM/yyyy",size:"small",placeholder:"DD/MM/YYYY"},model:{value:t.searchForm.endToTime,callback:function(e){t.$set(t.searchForm,"endToTime","string"==typeof e?e.trim():e)},expression:"searchForm.endToTime"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small",icon:"search",loading:t.searchForm.searchLoading},on:{click:function(e){t.searchStockOutReport("1")}}},[t._v("Search")])],1)],1)],1)],1)],1),t._v(" "),r("div",{staticClass:"stockOutReport_content"},[r("div",{staticClass:"stockOutReport_toolBar"},[r("div",{staticClass:"stockOutReport_toolBar_title"},[t._v("Stockout Report List")]),t._v(" "),r("div",{staticClass:"stockOutReport_toolBar_exportList"},[r("el-button",{attrs:{type:"info",size:"small",icon:"my",loading:t.searchForm.exportStockOutReportLoading},on:{click:t.exportStockOutReportList}},[t._v("Export")])],1),t._v(" "),t.stockOutReportListData.pageMap.total>0?r("div",{staticClass:"stockOutReport_toolBar_totalList"},[t._v("\n                Display "+t._s(t.stockOutReportListData.pageMap.startRow+1)+" - "+t._s(t.stockOutReportListData.pageMap.endRow)+" item, "+t._s(t.stockOutReportListData.pageMap.total)+" results in total\n            ")]):t._e()]),t._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTableData,expression:"loadingTableData"}],attrs:{"element-loading-text":"Loading"}},[r("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:t.stockOutReportListData.list,"default-sort":{prop:"transferCompleteDate",order:"descending"}}},[r("el-table-column",{attrs:{prop:"productId",label:"Product ID",align:"center"}}),t._v(" "),r("el-table-column",{attrs:{prop:"description",label:"Description",align:"left"}}),t._v(" "),r("el-table-column",{attrs:{prop:"transferQty",label:"Transfer Quantity",align:"right"}}),t._v(" "),r("el-table-column",{attrs:{prop:"outStockTime",label:"OutStock Time",align:"left"}}),t._v(" "),r("el-table-column",{attrs:{prop:"transferCompleteDate",label:"Transfer Complete Date",align:"left"}}),t._v(" "),r("el-table-column",{attrs:{prop:"from",label:"From",align:"center"}}),t._v(" "),r("el-table-column",{attrs:{prop:"to",label:"To",align:"center"}})],1),t._v(" "),t.stockOutReportListData.list&&t.stockOutReportListData.list.length?r("div",{staticClass:"page_box"},[r("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:t.stockOutReportListData.pageMap.total,"page-size":t.stockOutReportListData.pageMap.pageSize,"current-page":t.stockOutReportListData.pageMap.pageNum},on:{"update:currentPage":function(e){t.$set(t.stockOutReportListData.pageMap,"pageNum",e)},"current-change":function(e){t.searchStockOutReport(t.stockOutReportListData.pageMap.pageNum)}}})],1):t._e(),t._v(" "),r("div",{staticStyle:{clear:"both"}})],1)])])},y=[],D={render:b,staticRenderFns:y},k=D,_=r(99),x=a,O=_(v,k,!1,x,null,null);e.default=O.exports}});